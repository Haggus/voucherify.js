window.Voucherify=function(e,t,n){"use strict";var o={url:"https://voucherify-backend.herokuapp.com/client/v1/validate"},r=null;r=n&&"function"==typeof n.ajax&&n.Deferred?function(e,t){var r=null;return"function"!=typeof t&&(r=n.Deferred()),n.ajax({type:"GET",url:o.url+e,xhrFields:{withCredentials:!0},dataType:"json",headers:{"X-Client-Application-Id":o.applicationId,"X-Client-Token":o.token},timeout:o.timeout,success:function(e){var n=null;e&&"boolean"==typeof e.valid?"function"==typeof t?t(e):r.resolve(e):(n={type:"error",message:"Unexpected response structure.",context:e},"function"==typeof t?t(n):r.reject(n))},error:function(e){var n={type:"error",message:"XHR error happened.",context:e};"function"==typeof t?t(n):r.reject(n)}}),"function"!=typeof t?r.promise():void 0}:function(t,n){var r=new e.XMLHttpRequest;r.timeout=o.timeout,r.withCredentials=!0,r.open("GET",o.url+t,!0),r.setRequestHeader("X-Client-Application-Id",o.applicationId),r.setRequestHeader("X-Client-Token",o.token),r.onload=function(){var e=null;if(r.status>=200&&r.status<400){var t=JSON.parse(r.responseText);t&&"boolean"==typeof t.valid?"function"==typeof n&&n(t):(e={type:"error",message:"Unexpected response structure.",context:t},"function"==typeof n&&n(e))}else e={type:"error",message:"Unexpected status code.",context:r.status},"function"==typeof n&&n(e)},r.onerror=function(e){var t={type:"error",message:"XHR error happened.",context:e};"function"==typeof n&&n(t)},r.send()};var i={initialize:function(e,t,n){o.applicationId=e,o.token=t,o.timeout=n||5e3},setIdentity:function(e){o.trackingId=e},validate:function(e,t){if(!o.applicationId&&!o.token)return console.error("Voucherify client could not verify coupon - Lack of configuration - Missing Application ID or Token."),null;if(e&&(e=e.replace(/[\s\r\n]/g,"")),!e)return console.error("Voucherify client could not verify code, because it is missing - please provide Voucher Code."),null;var n="?code="+encodeURIComponent(e);return o.trackingId&&(n+="&tracking_id="+encodeURIComponent(o.trackingId)),r(n,t)}};return i}(window,window.document,window.jQuery);