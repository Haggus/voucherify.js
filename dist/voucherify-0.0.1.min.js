window.Voucherify=function(e,t,o){"use strict";var n={url:"https://voucherify-backend.herokuapp.com/client/v1/validate"},r=null;r=o&&"function"==typeof o.ajax&&o.Deferred?function(e,t){var r=null;return"function"!=typeof t&&(r=o.Deferred()),o.ajax({type:"GET",url:n.url+e,dataType:"json",headers:{"X-Client-Application-Id":n.applicationId,"X-Client-Token":n.token},timeout:n.timeout,success:function(e,o){var n=null;e&&"boolean"==typeof e.valid?"function"==typeof t?t(e):r.resolve(e):(n={type:"error",message:"Unexpected response structure.",context:e},"function"==typeof t?t(n):r.reject(n))},error:function(e){var o={type:"error",message:e.toString(),context:e};"function"==typeof t?t(o):r.reject(o)}}),"function"!=typeof t?r.promise():void 0}:function(e,t){var o=new XMLHttpRequest;o.open("GET",n.url+e,!0),o.setRequestHeader("X-Client-Application-Id",n.applicationId),o.setRequestHeader("X-Client-Token",n.token),o.onload=function(){var e=null;if(o.status>=200&&o.status<400){var n=JSON.parse(o.responseText);n&&"boolean"==typeof n.valid?"function"==typeof t&&t(n):(e={type:"error",message:"Unexpected response structure.",context:n},"function"==typeof t&&t(e))}else e={type:"error",message:"Unexpected status code.",context:o.status},"function"==typeof t&&t(e)},o.onerror=function(e){var o={type:"error",message:e.toString(),context:e};"function"==typeof t&&t(o)},o.send()};var i={initialize:function(e,t,o){n.applicationId=e,n.token=t,n.timeout=o||5e3},validate:function(e,t){if(!n.applicationId&&!n.token)return console.error("Voucherify client could not verify coupon - Lack of configuration - Missing Application ID or Token."),null;if(e&&(e=e.replace(/[\s\r\n]/g,"")),!e)return console.error("Voucherify client could not verify code, because it is missing - please provide Voucher Code."),null;var o="?code="+encodeURIComponent(e);return r(o,t)}};return i}(window,window.document,window.jQuery);