window.Voucherify=function(e,t,n){"use strict";var o={url:"https://voucherify-backend.herokuapp.com/client/v1/validate"},r=null;r=n&&"function"==typeof n.ajax?function(e,t){var r=null;return"function"!=typeof t&&(r=n.Deferred),n.ajax({type:"GET",url:o.url+e,dataType:"json",headers:{"X-Client-Application-Id":o.applicationId,"X-Client-Token":o.token},timeout:o.timeout,success:function(e,n){var o=null;e&&"boolean"==typeof e.valid?"function"==typeof t?t(e):r.resolve(e):(o={type:"error",message:"Unexpected response structure.",context:e},"function"==typeof t?t(o):r.reject(o))},error:function(e){var n={type:"error",message:e.toString(),context:e};"function"==typeof t?t(n):r.reject(n)}}),"function"!=typeof t?r.promise():void 0}:function(e,t){var n=new XMLHttpRequest;n.open("GET",o.url+e,!0),n.setRequestHeader("X-Client-Application-Id",o.applicationId),n.setRequestHeader("X-Client-Token",o.token),n.onload=function(){var e=null;if(n.status>=200&&n.status<400){var o=JSON.parse(n.responseText);o&&"boolean"==typeof o.valid?"function"==typeof t&&t(o):(e={type:"error",message:"Unexpected response structure.",context:o},"function"==typeof t&&t(e))}else e={type:"error",message:"Unexpected status code.",context:n.status},"function"==typeof t&&t(e)},n.onerror=function(e){var n={type:"error",message:e.toString(),context:e};"function"==typeof t&&t(n)},n.send()};var i={initialize:function(e,t,n){o.applicationId=e,o.token=t,o.timeout=n||5e3},validate:function(e,t){if(!o.applicationId&&!o.token)return console.error("Voucherify client could not verify coupon - Lack of configuration - Missing Application ID or Token."),null;var n="?code="+encodeURIComponent(e);return r(n,t)}};return i}(window,window.document,window.jQuery);